[refactor] change control flow to use async/await