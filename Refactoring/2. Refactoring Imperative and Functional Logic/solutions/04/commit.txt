[refactor] isolate write output file